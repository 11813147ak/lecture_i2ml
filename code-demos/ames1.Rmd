---
output: pdf_document
title: "mlr3 Exercises Day 1 - Ames Housing Dataset"
---
```{r, echo = FALSE}
solution = TRUE
knitr::opts_chunk$set(echo = solution, eval = solution)
```

This usecase is intended to use mlr3 to perform a benchmark analysis on the _Ames Dataset_.

The main objectives of this study are as follows:

- To apply data preprocessing and preparation techniques in order to obtain clean data
- To build machine learning models able to predict house price based on house features
- To analyze and compare models performance in order to choose the best model

## Accessing the dataset

The dataset is available on Kaggle https://www.kaggle.com/prevek18/ames-housing-dataset.
Kaggle is a platform which provides data science competitions and datasets which can be used to get familiar with typical machine learning methods.

## Importing the data

```{r}
housing = read.csv("data/AmesHousing_preprocessed.csv")
```

1. Load the `mlr3` and `mlr3learners` packages.

```{r}
library(mlr3)
library(mlr3learners)
```

2. Create a regression task object.

```{r}
task = TaskRegr$new(id = "ames_housing", backend = as_data_backend(housing), target = "SalePrice")
# task
```

3. Create a list of learning algorithms which you want to use in the benchmark.

```{r}
# get a featureless learner and a regression tree
learners = list(
  lrn("regr.featureless"),
  lrn("regr.kknn"),
  lrn("regr.rpart"),
  lrn("regr.ranger")
)
```

4. Create a resampling object for your benchmark evaluation.

```{r}
# compare via 3-fold cross validation
resamplings = rsmp("cv", folds = 10)
```

5. Create a grid corresponding to the planned benchmark including the task, all learners and the resampling strategy.

```{r}
# create a BenchmarkDesign object
design = benchmark_grid(task, learners, resamplings)
print(design)
```

6. Run the benchmark

```{r}
# execute the benchmark
bmr = benchmark(design)
```

7. Use appropriate regression measures to measure the performance of each learner in the benchmark.

```{r}
# get some measures: accuracy (acc) and area under the curve (auc)
measures = mlr_measures$mget(c("regr.mse", "regr.mae"))
bmr$aggregate(measures)
```

8. Use an appropriate plot to illustrate the benchmark results.
Have e.g. a look at the `mlr3viz` package.

```{r}
library(mlr3viz)
autoplot(bmr)
```


